<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Reconstruction from Freesurfer — recon • freesurfer</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Reconstruction from Freesurfer — recon" />
<meta property="og:description" content="Reconstruction from Freesurfer with most of the options
implemented." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">freesurfer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.6.7.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/exploring_included_data.html">Exploring Included Subject Freesurfer Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/muschellij2/freesurfer/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Reconstruction from Freesurfer</h1>
    <small class="dont-index">Source: <a href='https://github.com/muschellij2/freesurfer/blob/master/R/recon.R'><code>R/recon.R</code></a></small>
    <div class="hidden name"><code>recon.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Reconstruction from Freesurfer with most of the options
implemented.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>recon</span><span class='op'>(</span>
  <span class='va'>infile</span>,
  outdir <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>subjid</span>,
  motioncor <span class='op'>=</span> <span class='cn'>TRUE</span>,
  nuintensitycor <span class='op'>=</span> <span class='cn'>TRUE</span>,
  talairach <span class='op'>=</span> <span class='cn'>TRUE</span>,
  normalization <span class='op'>=</span> <span class='cn'>TRUE</span>,
  skullstrip <span class='op'>=</span> <span class='cn'>TRUE</span>,
  gcareg <span class='op'>=</span> <span class='cn'>TRUE</span>,
  canorm <span class='op'>=</span> <span class='cn'>TRUE</span>,
  careg <span class='op'>=</span> <span class='cn'>TRUE</span>,
  rmneck <span class='op'>=</span> <span class='cn'>TRUE</span>,
  skull_lta <span class='op'>=</span> <span class='cn'>TRUE</span>,
  calabel <span class='op'>=</span> <span class='cn'>TRUE</span>,
  normalization2 <span class='op'>=</span> <span class='cn'>TRUE</span>,
  segmentation <span class='op'>=</span> <span class='cn'>TRUE</span>,
  fill <span class='op'>=</span> <span class='cn'>TRUE</span>,
  tessellate <span class='op'>=</span> <span class='cn'>TRUE</span>,
  smooth1 <span class='op'>=</span> <span class='cn'>TRUE</span>,
  inflate1 <span class='op'>=</span> <span class='cn'>TRUE</span>,
  qsphere <span class='op'>=</span> <span class='cn'>TRUE</span>,
  fix <span class='op'>=</span> <span class='cn'>TRUE</span>,
  finalsurfs <span class='op'>=</span> <span class='cn'>TRUE</span>,
  smooth2 <span class='op'>=</span> <span class='cn'>TRUE</span>,
  inflate2 <span class='op'>=</span> <span class='cn'>TRUE</span>,
  cortribbon <span class='op'>=</span> <span class='cn'>TRUE</span>,
  sphere <span class='op'>=</span> <span class='cn'>TRUE</span>,
  surfreg <span class='op'>=</span> <span class='cn'>TRUE</span>,
  contrasurfreg <span class='op'>=</span> <span class='cn'>TRUE</span>,
  avgcurv <span class='op'>=</span> <span class='cn'>TRUE</span>,
  cortparc <span class='op'>=</span> <span class='cn'>TRUE</span>,
  parcstats <span class='op'>=</span> <span class='cn'>TRUE</span>,
  cortparc2 <span class='op'>=</span> <span class='cn'>TRUE</span>,
  parcstats2 <span class='op'>=</span> <span class='cn'>TRUE</span>,
  aparc2aseg <span class='op'>=</span> <span class='cn'>TRUE</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  opts <span class='op'>=</span> <span class='st'>""</span>
<span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>infile</th>
      <td><p>Input filename (dcm or nii)</p></td>
    </tr>
    <tr>
      <th>outdir</th>
      <td><p>Output directory</p></td>
    </tr>
    <tr>
      <th>subjid</th>
      <td><p>subject id</p></td>
    </tr>
    <tr>
      <th>motioncor</th>
      <td><p>When there are multiple source volumes, this step will 
correct for small motions between them and then average them together. 
The input are the volumes found in file(s) mri/orig/XXX.mgz. The output 
will be the volume mri/orig.mgz. If no runs are found, then it looks for 
a volume in mri/orig (or mri/orig.mgz). If that volume is there, then it 
is used in subsequent processes as if it was the motion corrected volume. 
If no volume is found, then the process exits with errors.</p></td>
    </tr>
    <tr>
      <th>nuintensitycor</th>
      <td><p>Non-parametric Non-uniform intensity Normalization 
(N3), corrects for intensity non-uniformity in MR data, making relatively 
few assumptions about the data. This runs the MINC tool 'nu_correct'. By 
default, four iterations of nu_correct are run. The flag '-nuiterations'
specification of some other number of iterations.</p></td>
    </tr>
    <tr>
      <th>talairach</th>
      <td><p>computes the affine transform from the orig volume to the 
MNI305 atlas using the MINC program mritotal. 
Creates the files mri/transform/talairach.auto.xfm and talairach.xfm.</p></td>
    </tr>
    <tr>
      <th>normalization</th>
      <td><p>Performs intensity normalization of the orig 
volume and places the result in mri/T1.mgz</p></td>
    </tr>
    <tr>
      <th>skullstrip</th>
      <td><p>Removes the skull from mri/T1.mgz and 
stores the result in mri/brainmask.auto.mgz and 
mri/brainmask.mgz. Runs the mri_watershed program.</p></td>
    </tr>
    <tr>
      <th>gcareg</th>
      <td><p>Computes transform to align the mri/nu.mgz volume 
to the default GCA atlas found in FREESURFER_HOME/average. 
Creates the file mri/transforms/talairach.lta.</p></td>
    </tr>
    <tr>
      <th>canorm</th>
      <td><p>Further normalization, based on GCA model. 
Creates mri/norm.mgz.</p></td>
    </tr>
    <tr>
      <th>careg</th>
      <td><p>Computes a nonlinear transform to align with GCA atlas. 
Creates the file mri/transform/talairach.m3z.</p></td>
    </tr>
    <tr>
      <th>rmneck</th>
      <td><p>The neck region is removed from the NU-corrected volume mri/nu.mgz. 
Makes use of transform computed from prior CA Register stage. 
Creates the file mri/nu_noneck.mgz.</p></td>
    </tr>
    <tr>
      <th>skull_lta</th>
      <td><p>Computes transform to align volume mri/nu_noneck.mgz
with GCA volume possessing the skull. 
Creates the file mri/transforms/talairach_with_skull.lta.</p></td>
    </tr>
    <tr>
      <th>calabel</th>
      <td><p>Labels subcortical structures, based in GCA model. 
Creates the files mri/aseg.auto.mgz and mri/aseg.mgz.</p></td>
    </tr>
    <tr>
      <th>normalization2</th>
      <td><p>Performs a second (major) intensity correction 
using only the brain volume as the input 
(so that it has to be done after the skull strip). 
Intensity normalization works better when the skull 
has been removed. Creates a new brain.mgz volume. 
If -noaseg flag is used, then aseg.mgz is not used by mri_normalize.</p></td>
    </tr>
    <tr>
      <th>segmentation</th>
      <td><p>Attempts to separate white matter from 
everything else. The input is mri/brain.mgz, and the 
output is mri/wm.mgz. Uses intensity, neighborhood, 
and smoothness constraints. This is the volume that is 
edited when manually fixing defects. Calls mri_segment, 
mri_edit_wm_with_aseg, and mri_pretess. To keep previous edits, 
run with -keepwmedits. If -noaseg is used, them mri_edit_wm_aseg 
is skipped.</p></td>
    </tr>
    <tr>
      <th>fill</th>
      <td><p>This creates the subcortical mass from which the orig 
surface is created. The mid brain is cut from the cerebrum, 
and the hemispheres are cut from each other. The left hemisphere 
is binarized to 255. The right hemisphere is binarized to 127. 
The input is mri/wm.mgz and the output is mri/filled.mgz. 
Calls mri_fill. If the cut fails, then seed points can be supplied 
(see -cc-crs, -pons-crs, -lh-crs, -rh-crs). 
The actual points used for the cutting planes in the corpus callosum
 and pons can be found in scripts/ponscc.cut.log. 
 This is the last stage of volumetric processing. 
 If -noaseg is used, then aseg.mgz is not used by mri_fill.</p></td>
    </tr>
    <tr>
      <th>tessellate</th>
      <td><p>This is the step where the orig surface 
(ie, surf/?h.orig.nofix) is created. 
The surface is created by covering the filled hemisphere 
with triangles. Runs mri_tessellate. The places where the 
points of the triangles meet are called vertices. 
Creates the file surf/?h.orig.nofix Note: the 
topology fixer will create the surface ?h.orig.</p></td>
    </tr>
    <tr>
      <th>smooth1</th>
      <td><p>Calls mris_smooth. Smooth1 is the step just after tessellation</p></td>
    </tr>
    <tr>
      <th>inflate1</th>
      <td><p>Inflation of the surf/?h.smoothwm(.nofix) surface to create surf/?h.inflated.</p></td>
    </tr>
    <tr>
      <th>qsphere</th>
      <td><p>automatic topology fixing. It is a quasi-homeomorphic spherical transformation of the inflated surface designed to localize topological defects for the subsequent automatic topology fixer.</p></td>
    </tr>
    <tr>
      <th>fix</th>
      <td><p>Finds topological defects (ie, holes in a filled hemisphere) using surf/?h.qsphere.nofix, and changes the orig surface (surf/?h.orig.nofix) to remove the defects. Changes the number of vertices. All the defects will be removed, but the user should check the orig surface in the volume to make sure that it looks appropriate. Calls mris_fix_topology.</p></td>
    </tr>
    <tr>
      <th>finalsurfs</th>
      <td><p>Creates the ?h.white and ?h.pial surfaces as well as the thickness file (?h.thickness) and curvature file (?h.curv). The white surface is created by "nudging" the orig surface so that it closely follows the white-gray intensity gradient as found in the T1 volume. The pial surface is created by expanding the white surface so that it closely follows the gray-CSF intensity gradient as found in the T1 volume. Calls mris_make_surfaces.</p></td>
    </tr>
    <tr>
      <th>smooth2</th>
      <td><p>the step just after topology fixing.</p></td>
    </tr>
    <tr>
      <th>inflate2</th>
      <td><p>inflate2 is the step just after topology fixing</p></td>
    </tr>
    <tr>
      <th>cortribbon</th>
      <td><p>Creates binary volume masks of the cortical ribbon, ie, each voxel is either a 1 or 0 depending upon whether it falls in the ribbon or not. Saved as ?h.ribbon.mgz. Uses mgz regardless of whether the -mgz option is used.</p></td>
    </tr>
    <tr>
      <th>sphere</th>
      <td><p>Inflates the orig surface into a sphere while minimizing metric distortion. This step is necessary in order to register the surface to the spherical atlas. (also known as the spherical morph). Calls mris_sphere. Creates surf/?h.sphere.</p></td>
    </tr>
    <tr>
      <th>surfreg</th>
      <td><p>Registers the orig surface to the spherical atlas through surf/?h.sphere. The surfaces are first coarsely registered by aligning the large scale folding patterns found in ?h.sulc and then fine tuned using the small-scale patterns as in ?h.curv. Calls mris_register. Creates surf/?h.sphere.reg.</p></td>
    </tr>
    <tr>
      <th>contrasurfreg</th>
      <td><p>Same as ipsilateral but registers to the contralateral atlas. Creates lh.rh.sphere.reg and rh.lh.sphere.reg.</p></td>
    </tr>
    <tr>
      <th>avgcurv</th>
      <td><p>Resamples the average curvature from the atlas to that of the subject. Allows the user to display activity on the surface of an individual with the folding pattern (ie, anatomy) of a group. Calls mrisp_paint. Creates surf/?h.avg_curv.</p></td>
    </tr>
    <tr>
      <th>cortparc</th>
      <td><p>Assigns a neuroanatomical label to each location on the cortical surface. Incorporates both geometric information derived from the cortical model (sulcus and curvature), and neuroanatomical convention. Calls mris_ca_label. -cortparc creates label/?h.aparc.annot, and -cortparc2 creates /label/?h.aparc.a2005s.annot.</p></td>
    </tr>
    <tr>
      <th>parcstats</th>
      <td><p>Runs mris_anatomical_stats to create a summary table of cortical parcellation statistics for each structure, including 1. structure name 2. number of vertices 3. total surface area (mm2) 4. total gray matter volume (mm3) 5. average cortical thickness (mm) 6. standard error of cortical thickness (mm) 7. integrated rectified mean curvature 8. integrated rectified Gaussian curvature 9. folding index 10. intrinsic curvature index. For -parcstats, the file is saved in stats/?h.aparc.stats. For -parcstats2, the file is saved in stats/?h.aparc.a2005s.stats.</p></td>
    </tr>
    <tr>
      <th>cortparc2</th>
      <td><p>see cortparc argument</p></td>
    </tr>
    <tr>
      <th>parcstats2</th>
      <td><p>see cortparc2 argument</p></td>
    </tr>
    <tr>
      <th>aparc2aseg</th>
      <td><p>Maps the cortical labels from the automatic cortical parcellation (aparc) to the automatic segmentation volume (aseg). The result can be used as the aseg would.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>print diagnostic messages</p></td>
    </tr>
    <tr>
      <th>opts</th>
      <td><p>Additional options</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Result of <code><a href='https://rdrr.io/r/base/system.html'>system</a></code></p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by John Muschelli.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


